{% extends 'base.html' %}
{% block title %}Travel Options{% endblock %}
{% block content %}
<h2>Find Travel Options</h2>
<form method="get" class="row g-3 align-items-end mb-4">
  <div class="col-md-2">
    <label class="form-label" for="id_type">{{ form.type.label }}</label>
    {{ form.type }}
  </div>
  <div class="col-md-3">
    <label class="form-label" for="id_source">{{ form.source.label }}</label>
    {{ form.source }}
  </div>
  <div class="col-md-3">
    <label class="form-label" for="id_destination">{{ form.destination.label }}</label>
    {{ form.destination }}
  </div>
  <div class="col-md-2">
    <label class="form-label" for="id_date">{{ form.date.label }}</label>
    {{ form.date }}
  </div>
  <div class="col-md-2">
    <button class="btn btn-primary w-100" type="submit">Search</button>
  </div>
</form>

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Type</th><th>From</th><th>To</th><th>Date</th><th>Time</th><th>Price</th><th>Seats</th><th></th>
      </tr>
    </thead>
    <tbody>
      {% for t in travel_options %}
      <tr>
        <td>{{ t.type }}</td>
        <td>{{ t.source }}</td>
        <td>{{ t.destination }}</td>
        <td>{{ t.departure_date }}</td>
        <td>{{ t.departure_time }}</td>
        <td>${{ t.price }}</td>
        <td>{{ t.available_seats }}</td>
        <td>
          {% if user.is_authenticated and t.available_seats > 0 %}
            <a class="btn btn-sm btn-success" href="{% url 'booking:create_booking' t.id %}">Book</a>
          {% else %}
            <button class="btn btn-sm btn-secondary" disabled>Book</button>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="8" class="text-center">No matching options.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


