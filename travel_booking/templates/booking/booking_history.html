{% extends 'base.html' %}
{% block title %}My Bookings{% endblock %}
{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h2 class="mb-0">My Bookings</h2>
  <a class="btn btn-outline-primary" href="{% url 'booking:travel_list' %}"><i class="bi bi-plus-lg me-1"></i>New booking</a>
  </div>

<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead>
      <tr class="text-uppercase small text-muted">
        <th>ID</th><th>Trip</th><th>Date</th><th>Passenger</th><th>Seats</th><th>Total</th><th>Status</th><th class="text-end"></th>
      </tr>
    </thead>
    <tbody>
      {% for b in bookings %}
      <tr>
        <td class="fw-semibold">#{{ b.id }}</td>
        <td>
          {% if b.travel_option.type == 'Flight' %}<i class="bi bi-airplane me-1 text-primary"></i>{% endif %}
          {% if b.travel_option.type == 'Train' %}<i class="bi bi-train-front me-1 text-success"></i>{% endif %}
          {% if b.travel_option.type == 'Bus' %}<i class="bi bi-bus-front me-1 text-warning"></i>{% endif %}
          {{ b.travel_option.type }} {{ b.travel_option.source }} â†’ {{ b.travel_option.destination }}
        </td>
        <td>{{ b.travel_option.departure_date }} {{ b.travel_option.departure_time }}</td>
        <td>{{ b.primary_passenger_name }} ({{ b.primary_passenger_age }})</td>
        <td>{{ b.number_of_seats }}</td>
        <td class="fw-semibold">${{ b.total_price }}</td>
        <td>
          {% if b.status == 'Confirmed' %}
            <span class="badge text-bg-success">{{ b.status }}</span>
          {% else %}
            <span class="badge text-bg-secondary">{{ b.status }}</span>
          {% endif %}
        </td>
        <td class="text-end">
          {% if b.status == 'Confirmed' %}
          <a class="btn btn-sm btn-outline-danger" href="{% url 'booking:cancel_booking' b.id %}">Cancel</a>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" class="text-center">No bookings yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


